<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Artikel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .page-transition { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b border-gray-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-2 rounded-xl">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                        </svg>
                    </div>
                    <h1 class="ml-3 text-xl font-bold text-gray-900">Portal Artikel</h1>
                </div>
                <div class="flex gap-3">
                    <button id="publicPageBtn" onclick="showPublicPage()" class="px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-xl font-semibold transition-all duration-200 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                        </svg>
                        Halaman Publik
                    </button>
                    <button id="adminPageBtn" onclick="showAdminPage()" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold transition-all duration-200 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        Admin Panel
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Public Page -->
    <div id="publicPage" class="page-transition">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                <div class="text-center">
                    <h1 class="text-4xl md:text-6xl font-bold mb-6">Portal Berita & Artikel</h1>
                    <p class="text-xl md:text-2xl text-blue-100 mb-8">Temukan artikel terbaru dan informasi menarik</p>
                    <div class="flex justify-center">
                        <input type="text" id="publicSearchInput" placeholder="Cari artikel..." class="px-6 py-4 rounded-l-xl text-gray-900 w-80 focus:outline-none focus:ring-2 focus:ring-blue-300">
                        <button onclick="searchPublicArticles()" class="bg-blue-500 hover:bg-blue-600 px-6 py-4 rounded-r-xl transition-colors duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Public Articles Grid -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Artikel Terbaru</h2>
                <p class="text-gray-600">Baca artikel-artikel menarik dari berbagai topik</p>
            </div>
            
            <div id="publicArticlesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Public articles will be displayed here -->
            </div>
            
            <div id="publicEmptyState" class="text-center py-16 hidden">
                <div class="bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Belum ada artikel</h3>
                <p class="text-gray-600">Artikel akan muncul di sini setelah dipublikasikan</p>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="adminPage" class="page-transition hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Admin Header -->
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Admin Panel</h2>
                        <p class="text-gray-600">Kelola artikel dan konten website</p>
                    </div>
                    <button onclick="showCreateForm()" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        Tambah Artikel
                    </button>
                </div>
            </div>

            <!-- Admin Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-xl">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-600">Total Artikel</p>
                            <p class="text-2xl font-bold text-gray-900" id="adminArticleCount">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-3 rounded-xl">
                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-600">Artikel Dipublikasi</p>
                            <p class="text-2xl font-bold text-gray-900" id="publishedCount">0</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex items-center">
                        <div class="bg-purple-100 p-3 rounded-xl">
                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm text-gray-600">Penulis Aktif</p>
                            <p class="text-2xl font-bold text-gray-900" id="authorCount">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Articles Management -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900">Kelola Artikel</h3>
                    <div class="flex gap-3">
                        <input type="text" id="adminSearchInput" placeholder="Cari artikel..." class="px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
                        <button onclick="searchAdminArticles()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-xl transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div id="adminArticlesContainer" class="space-y-4">
                    <!-- Admin articles list will be displayed here -->
                </div>
                
                <div id="adminEmptyState" class="text-center py-16 hidden">
                    <div class="bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Belum ada artikel</h3>
                    <p class="text-gray-600 mb-6">Mulai dengan membuat artikel pertama Anda</p>
                    <button onclick="showCreateForm()" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                        Tambah Artikel Pertama
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create/Edit Form Modal -->
    <div id="articleModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h2 id="modalTitle" class="text-2xl font-bold text-gray-900">Tambah Artikel Baru</h2>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <form id="articleForm" class="p-6 space-y-6">
                <input type="hidden" id="editId" value="">
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Judul Artikel</label>
                    <input type="text" id="title" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" placeholder="Masukkan judul artikel...">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Penulis</label>
                    <input type="text" id="author" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" placeholder="Nama penulis...">
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">URL Gambar</label>
                    <input type="url" id="image" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" placeholder="https://example.com/image.jpg">
                    <p class="text-xs text-gray-500 mt-1">Opsional: URL gambar untuk artikel</p>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Isi Artikel</label>
                    <textarea id="content" required rows="8" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none" placeholder="Tulis isi artikel di sini..."></textarea>
                </div>
                
                <div>
                    <label class="flex items-center">
                        <input type="checkbox" id="published" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-sm font-semibold text-gray-700">Publikasikan artikel</span>
                    </label>
                    <p class="text-xs text-gray-500 mt-1">Artikel yang dipublikasikan akan muncul di halaman publik</p>
                </div>
                
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-3 px-6 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                        <span id="submitText">Simpan Artikel</span>
                    </button>
                    <button type="button" onclick="closeModal()" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-semibold transition-all duration-200">
                        Batal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Article Detail Modal -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div id="detailContent">
                <!-- Article detail will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        // Sample data storage
        let articles = [
            {
                id: 1,
                title: "Panduan Lengkap Belajar JavaScript",
                author: "Ahmad Rizki",
                content: "JavaScript adalah bahasa pemrograman yang sangat populer untuk pengembangan web. Dalam artikel ini, kita akan membahas dasar-dasar JavaScript mulai dari variabel, fungsi, hingga manipulasi DOM. JavaScript memungkinkan kita untuk membuat website yang interaktif dan dinamis. Dengan mempelajari JavaScript, Anda dapat mengembangkan aplikasi web modern yang responsif dan user-friendly.",
                date: "2024-01-15",
                image: "https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=500&h=300&fit=crop",
                published: true
            },
            {
                id: 2,
                title: "Tips Produktivitas untuk Developer",
                author: "Sari Dewi",
                content: "Sebagai developer, produktivitas adalah kunci kesuksesan. Artikel ini akan membahas berbagai tips dan trik untuk meningkatkan produktivitas dalam coding. Mulai dari penggunaan tools yang tepat, manajemen waktu, hingga teknik debugging yang efektif. Dengan menerapkan tips-tips ini, Anda dapat menyelesaikan project lebih cepat dan dengan kualitas yang lebih baik.",
                date: "2024-01-10",
                image: "https://images.unsplash.com/photo-1551650975-87deedd944c3?w=500&h=300&fit=crop",
                published: true
            },
            {
                id: 3,
                title: "Draft: Artikel Belum Selesai",
                author: "John Doe",
                content: "Ini adalah contoh artikel yang belum dipublikasikan. Artikel ini masih dalam tahap draft dan tidak akan muncul di halaman publik.",
                date: "2024-01-20",
                image: "",
                published: false
            }
        ];

        let nextId = 4;
        let filteredPublicArticles = [];
        let filteredAdminArticles = [];
        let currentPage = 'public';

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            showPublicPage();
            
            // Search functionality
            document.getElementById('publicSearchInput').addEventListener('input', searchPublicArticles);
            document.getElementById('adminSearchInput').addEventListener('input', searchAdminArticles);
            
            // Form submission
            document.getElementById('articleForm').addEventListener('submit', handleFormSubmit);
        });

        // Page navigation
        function showPublicPage() {
            currentPage = 'public';
            document.getElementById('publicPage').classList.remove('hidden');
            document.getElementById('adminPage').classList.add('hidden');
            
            // Update nav buttons
            document.getElementById('publicPageBtn').className = 'px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold transition-all duration-200 flex items-center';
            document.getElementById('adminPageBtn').className = 'px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-xl font-semibold transition-all duration-200 flex items-center';
            
            searchPublicArticles();
        }

        function showAdminPage() {
            currentPage = 'admin';
            document.getElementById('adminPage').classList.remove('hidden');
            document.getElementById('publicPage').classList.add('hidden');
            
            // Update nav buttons
            document.getElementById('adminPageBtn').className = 'px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold transition-all duration-200 flex items-center';
            document.getElementById('publicPageBtn').className = 'px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-xl font-semibold transition-all duration-200 flex items-center';
            
            searchAdminArticles();
            updateAdminStats();
        }

        // Display public articles (only published)
        function displayPublicArticles() {
            const container = document.getElementById('publicArticlesContainer');
            const emptyState = document.getElementById('publicEmptyState');
            
            if (filteredPublicArticles.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            container.innerHTML = filteredPublicArticles.map(article => `
                <article class="bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden fade-in group cursor-pointer" onclick="viewPublicArticle(${article.id})">
                    ${article.image ? `
                        <div class="h-48 bg-gradient-to-r from-blue-400 to-indigo-500 relative overflow-hidden">
                            <img src="${article.image}" alt="${article.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" onerror="this.parentElement.innerHTML='<div class=\\'flex items-center justify-center h-full text-white text-4xl\\'>📰</div>'">
                        </div>
                    ` : `
                        <div class="h-48 bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center">
                            <div class="text-6xl text-white">📰</div>
                        </div>
                    `}
                    
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-sm text-blue-600 font-semibold bg-blue-50 px-3 py-1 rounded-full">${formatDate(article.date)}</span>
                            <span class="text-sm text-gray-500">Oleh ${article.author}</span>
                        </div>
                        
                        <h3 class="text-xl font-bold text-gray-900 mb-3 line-clamp-2 group-hover:text-blue-600 transition-colors duration-200">${article.title}</h3>
                        <p class="text-gray-700 mb-4 line-clamp-3">${article.content}</p>
                        
                        <div class="flex items-center text-blue-600 font-semibold group-hover:text-blue-700 transition-colors duration-200">
                            <span>Baca Selengkapnya</span>
                            <svg class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </div>
                </article>
            `).join('');
        }

        // Display admin articles (all articles)
        function displayAdminArticles() {
            const container = document.getElementById('adminArticlesContainer');
            const emptyState = document.getElementById('adminEmptyState');
            
            if (filteredAdminArticles.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            container.innerHTML = filteredAdminArticles.map(article => `
                <div class="border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all duration-200 fade-in">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-2">
                                <h4 class="text-lg font-semibold text-gray-900">${article.title}</h4>
                                <span class="px-2 py-1 text-xs font-semibold rounded-full ${article.published ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                                    ${article.published ? 'Dipublikasi' : 'Draft'}
                                </span>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Oleh: ${article.author} • ${formatDate(article.date)}</p>
                            <p class="text-gray-700 line-clamp-2">${article.content}</p>
                        </div>
                        <div class="flex gap-2 ml-4">
                            <button onclick="viewPublicArticle(${article.id})" class="text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-lg transition-all duration-200" title="Lihat">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </button>
                            <button onclick="editArticle(${article.id})" class="text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-lg transition-all duration-200" title="Edit">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="togglePublish(${article.id})" class="text-${article.published ? 'yellow' : 'green'}-600 hover:text-${article.published ? 'yellow' : 'green'}-800 p-2 hover:bg-${article.published ? 'yellow' : 'green'}-50 rounded-lg transition-all duration-200" title="${article.published ? 'Unpublish' : 'Publish'}">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    ${article.published ? 
                                        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>' :
                                        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>'
                                    }
                                </svg>
                            </button>
                            <button onclick="deleteArticle(${article.id})" class="text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition-all duration-200" title="Hapus">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Search functions
        function searchPublicArticles() {
            const searchTerm = document.getElementById('publicSearchInput').value.toLowerCase();
            filteredPublicArticles = articles.filter(article => 
                article.published && (
                    article.title.toLowerCase().includes(searchTerm) ||
                    article.author.toLowerCase().includes(searchTerm) ||
                    article.content.toLowerCase().includes(searchTerm)
                )
            );
            displayPublicArticles();
        }

        function searchAdminArticles() {
            const searchTerm = document.getElementById('adminSearchInput').value.toLowerCase();
            filteredAdminArticles = articles.filter(article => 
                article.title.toLowerCase().includes(searchTerm) ||
                article.author.toLowerCase().includes(searchTerm) ||
                article.content.toLowerCase().includes(searchTerm)
            );
            displayAdminArticles();
        }

        // CRUD Operations
        function showCreateForm() {
            document.getElementById('modalTitle').textContent = 'Tambah Artikel Baru';
            document.getElementById('submitText').textContent = 'Simpan Artikel';
            document.getElementById('articleForm').reset();
            document.getElementById('editId').value = '';
            document.getElementById('published').checked = true;
            document.getElementById('articleModal').classList.remove('hidden');
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            const formData = {
                title: document.getElementById('title').value,
                author: document.getElementById('author').value,
                content: document.getElementById('content').value,
                image: document.getElementById('image').value,
                published: document.getElementById('published').checked,
                date: new Date().toISOString().split('T')[0]
            };
            
            const editId = document.getElementById('editId').value;
            
            if (editId) {
                // Update existing article
                const index = articles.findIndex(a => a.id == editId);
                if (index !== -1) {
                    articles[index] = { ...articles[index], ...formData };
                    showNotification('Artikel berhasil diperbarui!', 'success');
                }
            } else {
                // Create new article
                const newArticle = {
                    id: nextId++,
                    ...formData
                };
                articles.unshift(newArticle);
                showNotification('Artikel berhasil ditambahkan!', 'success');
            }
            
            closeModal();
            if (currentPage === 'public') {
                searchPublicArticles();
            } else {
                searchAdminArticles();
                updateAdminStats();
            }
        }

        function editArticle(id) {
            const article = articles.find(a => a.id === id);
            if (!article) return;
            
            document.getElementById('modalTitle').textContent = 'Edit Artikel';
            document.getElementById('submitText').textContent = 'Perbarui Artikel';
            document.getElementById('editId').value = id;
            document.getElementById('title').value = article.title;
            document.getElementById('author').value = article.author;
            document.getElementById('content').value = article.content;
            document.getElementById('image').value = article.image || '';
            document.getElementById('published').checked = article.published;
            
            document.getElementById('articleModal').classList.remove('hidden');
        }

        function togglePublish(id) {
            const article = articles.find(a => a.id === id);
            if (!article) return;
            
            article.published = !article.published;
            const status = article.published ? 'dipublikasikan' : 'dijadikan draft';
            showNotification(`Artikel berhasil ${status}!`, 'success');
            
            searchAdminArticles();
            updateAdminStats();
            if (currentPage === 'public') {
                searchPublicArticles();
            }
        }

        function deleteArticle(id) {
            if (confirm('Apakah Anda yakin ingin menghapus artikel ini?')) {
                articles = articles.filter(a => a.id !== id);
                showNotification('Artikel berhasil dihapus!', 'success');
                
                if (currentPage === 'public') {
                    searchPublicArticles();
                } else {
                    searchAdminArticles();
                    updateAdminStats();
                }
            }
        }

        function viewPublicArticle(id) {
            const article = articles.find(a => a.id === id);
            if (!article) return;
            
            document.getElementById('detailContent').innerHTML = `
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h1 class="text-3xl font-bold text-gray-900 mb-4">${article.title}</h1>
                            <div class="flex items-center gap-4 text-sm text-gray-600">
                                <span class="flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                    ${article.author}
                                </span>
                                <span class="flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    ${formatDate(article.date)}
                                </span>
                                ${!article.published ? '<span class="px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full">Draft</span>' : ''}
                            </div>
                        </div>
                        <button onclick="closeDetailModal()" class="text-gray-400 hover:text-gray-600 transition-colors ml-4">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                ${article.image ? `
                    <div class="px-6 pt-6">
                        <img src="${article.image}" alt="${article.title}" class="w-full h-64 object-cover rounded-xl" onerror="this.style.display='none'">
                    </div>
                ` : ''}
                
                <div class="p-6">
                    <div class="prose max-w-none">
                        <p class="text-gray-700 leading-relaxed whitespace-pre-line text-lg">${article.content}</p>
                    </div>
                    
                    ${currentPage === 'admin' ? `
                        <div class="flex gap-3 mt-8 pt-6 border-t border-gray-200">
                            <button onclick="editArticle(${article.id}); closeDetailModal();" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                Edit Artikel
                            </button>
                            <button onclick="togglePublish(${article.id}); closeDetailModal();" class="bg-${article.published ? 'yellow' : 'green'}-600 hover:bg-${article.published ? 'yellow' : 'green'}-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    ${article.published ? 
                                        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>' :
                                        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>'
                                    }
                                </svg>
                                ${article.published ? 'Unpublish' : 'Publish'}
                            </button>
                            <button onclick="deleteArticle(${article.id}); closeDetailModal();" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                                Hapus Artikel
                            </button>
                        </div>
                    ` : ''}
                </div>
            `;
            
            document.getElementById('detailModal').classList.remove('hidden');
        }

        // Update admin statistics
        function updateAdminStats() {
            const totalArticles = articles.length;
            const publishedArticles = articles.filter(a => a.published).length;
            const uniqueAuthors = [...new Set(articles.map(a => a.author))].length;
            
            document.getElementById('adminArticleCount').textContent = totalArticles;
            document.getElementById('publishedCount').textContent = publishedArticles;
            document.getElementById('authorCount').textContent = uniqueAuthors;
        }

        // Utility functions
        function closeModal() {
            document.getElementById('articleModal').classList.add('hidden');
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }

        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-xl shadow-lg text-white font-semibold slide-up ${type === 'success' ? 'bg-green-500' : 'bg-red-500'}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Close modals when clicking outside
        document.getElementById('articleModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        document.getElementById('detailModal').addEventListener('click', function(e) {
            if (e.target === this) closeDetailModal();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97af5cc166496141',t:'MTc1NzE3NjM0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
